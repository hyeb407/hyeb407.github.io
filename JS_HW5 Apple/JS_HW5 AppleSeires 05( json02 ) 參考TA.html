<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./grid.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <style>
        .pic-box{
            position: sticky;
            top: 115px;
            /* border: 2px solid #ccc; */
            box-shadow: 0 0px 0px 0 rgba(0, 0, 0, 0.111), 0 0px 10px 0 rgba(0, 0, 0, 0.19);
            border-radius: 20px;
            overflow: hidden;
        }
        .main-pic{
            width: 100%;
            display: block;
            /* position: sticky;
            top: 0; */
        }

        .list{
            margin: auto;
            display: flex;
            /* flex-direction: row; */
            flex-wrap: wrap;
            /* justify-content: center; */
        }
        .section-title{
            width: 100%;
        }
        .card{
            /* min-width: 150px;
            max-width: 280px; */
            border:1px solid #ccc;
            border-radius: 10px;
            text-align: center;
            padding: 20px;
            /* display: flex;
            place-content: center; */
        }
        .card:hover{
            border:1.5px solid rgba(61, 109, 255, 0.461);
        }
        button{
            width: 100%;
            border: none;
            border-radius: 20px;
            padding: 10px;
            background-color: rgb(61, 109, 255);
            color: white;
        }
        
        .circle{
            width: 40px;
            height: 40px;
            border-radius: 30px;
            margin: auto; 
        }
       
        h5{
            margin-top: 20px;
        }
        h5 span{
            font-size: 10px;
            color: #646464;
            display: block;
            margin: 10px;
        }
        .price-box{
            font-size: 30px;
            border: none;
        }

        .navbar{
            position: sticky;
            top: 0px;
            z-index: 1;
        }
        .nav-link{
            width: 150px;
            text-align: center;
        }
        .nav-link:hover{
            color: rgb(61, 109, 255);
            border-radius: 20px;
            font-weight: bolder;
        }
        </style>
</head>
<body>
    
    
    <!-- navbar 區域 -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <!-- 不要滿版 <div class="container-fluid"> -->
        <div class="container">
        <a class="navbar-brand" href="#">Apple</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mx-auto">

              <!-- <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Home</a>
              </li> -->

              <li class="nav-item">
                <a class="nav-link" href="#" id="iPad">iPad</a>
              </li>

              <li class="nav-item">
                <a class="nav-link" href="#" id="iPhone">iPhone</a>
              </li>

              <li class="nav-item">
                <a class="nav-link" href="#" id="MacAir">Mac Air</a>
              </li>

            </ul>
     
          </div>
        </div>
      </nav>    
</header>
  

    <!-- 圖片+選項區塊 -->
    <div class="container main-container">
        <div class="row">
            <!-- 大標 -->
            <h1>
                購買 iPhone 14
            </h1>
            <div class="total-price">
                NT 34,900 起
            </div>

            <!-- 圖片區 -->
            <div class="col-12 col-md-6 col-lg-6 col-xl-6">
                <div class="pic-box">
                    <img class="main-pic" src="" alt="">
                </div>
            </div>
                
            <!-- 顏色選項 -->
            <div class="sub-container col-12 col-md-6 col-lg-6 col-xl-6">
                <section class="list col-12 col-md-12 col-lg-12 col-xl-12" id="styleBtnSection">
                    <div class="section-title">機型。<span> 哪一款最適合你？</span></div>
                      
                </section>

                <section class="list col-12 col-md-12 col-lg-12 col-xl-12" id="ramBtnSection">
                    <div class="section-title">記憶體。<span>你需要多少記憶體？</span></div>
                      
                </section>

                <section class="list col-12 col-md-12 col-lg-12 col-xl-12" id="colorBtnSection">
                    <div class="section-title">外觀。<span>挑選喜愛的顏色。</span></div>
                        <!-- <div class="col-6 col-md-6 col-lg-6 col-xl-6">
                            <div class="card colorBtn" id="太空灰色">
                                <div class="circle gray"></div>
                                <h5 class="colorBtnName">太空灰</h5>   
                            </div>
                        </div>
                        
                        <div class="col-6 col-md-6 col-lg-6 col-xl-6">
                            <div class="card colorBtn" id="銀色">
                                <div class="circle silver"></div>
                                <h5 class="colorBtnName">銀色</h5>               
                            </div>
                        </div>                    -->
                </section>
                <section class="list col-12 col-md-12 col-lg-12 col-xl-12" id="styleBtnSection">
                    <div class="section-title">有句號的標題<span>行銷文案</span></div>             
                </section>
   
                <!-- 儲存裝置選項 -->
                <section class="list col-12 col-md-12 col-lg-12 col-xl-12" id="storageBtnSection">          
                    <div class="section-title">儲存空間</div>
                         
                </section>
                
 
                <!-- 連線能力 network 選項 -->
                <section class="list col-12 col-md-12 col-lg-12 col-xl-12" id="networkBtnSection">            
                    <div class="section-title">連線能力</div>
                        <!-- <div class="col-12 col-md-12 col-lg-12 col-xl-12">
                            <div class="card networkBtn" id="Wi-Fi">
                                <h5 class="networkBtnName">Wi-Fi<span>每部 iPad 都可連接到 Wi-Fi 網路，使你能保持連線。 </span></h5>   
                            </div>
                        </div>
                        
                        <div class="ol-12 col-md-12 col-lg-12 col-xl-12">
                            <div class="card networkBtn" id="Cellular">
                                <h5 class="networkBtnName">Wi-Fi + 行動網路<span>Wi-Fi + 行動網路機型讓你在無法使用 Wi-Fi 時也能進行連線。</span></h5>               
                            </div>
                        </div> -->
                </section>


                <!-- 充電裝置 power 選項 -->
                <section class="list col-12 col-md-12 col-lg-12 col-xl-12" id="powerBtnSection">            
                    <div class="section-title">充電裝置</div>
                      
                </section>
                                     
                <!-- 價格試算 -->
                <section class="list col-12 col-md-12 col-lg-12 col-xl-12">
                    <div class="section-title">價格試算</div>
                        <div class="col-12 col-md-12 col-lg-12 col-xl-12">
                            <div class="card price-box" id="">NT$19,000 起</div>
                            <div class="col-12 col-md-12 col-lg-12 col-xl-12">
                                <button>繼續</button>
                            </div>
                        </div>
                </section>
            </div>
        </div>
    </div>

    <!-- 定義一個 Template  -->
    <template id="btn-title">
        <section class="list col-12 col-md-12 col-lg-12 col-xl-12" id="每個Section">
            <div class="widget-title">有句號的標題<span>行銷文案</span></div>             
        </section>
    </template>
   
    <template id="cardBtnColor">
        <div class="col-6 col-md-6 col-lg-6 col-xl-6">
            <div class="card colorBtn cardTemp" id="每個按鈕的ID">
                <!-- <div class="circle circleTemp"></div> -->
                <img src="" class="circle circleTemp">
                <h5 class="colorBtnName colorNameTemp">公版文字</h5>   
            </div>
        </div>
    </template>

    <template id="cardBtn">
        <div class="col-6 col-md-6 col-lg-6 col-xl-6">                             
            <div class="card cardTemp2" id="每個按鈕的ID">
                <h5 class="BtnName NameTemp">公版文字<span></span></h5>   
            </div>
        </div>
    </template>
   
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>

    
    <script type="module">
        import { $g } from './helpers.js';

        // 一、宣告 + 取得 DOM
        const categoryJsonUrl = "./JSON/Apple-refTA-Category.json";       
        const IPhone14JsonUrl = "./JSON/Apple-refTA-iPhone-14.json";       
        const IPadJsonUrl = "./JSON/Apple-refTA-iPad.json";
        
        //uri 是色票
        const IPhone14ColorUrl = './ApplePics02/iPad/color/'
        const IPadColorUrl = './ApplePics02/iPhone/color/'     
        const macColorUrl = './ApplePics02/MacAir/color/'
        
        let jsonParseArr = [];
        let colorPic;
        let showPrice;
              
        let picBox = document.querySelector(".pic-box");
        let priceBox = document.querySelector(".price-box");
        let mainPic = document.querySelector(".main-pic");
       
        let sectionTitle = $g(".section-title")
        let subContainer  =$g("#sub-Container")
        let cardTemp =$g(".cardTemp")
        let cardTemp2 =$g(".cardTemp2")


        let templateColorBtn = $g('#cardBtnColor'); //定義的 Template id
        let btnTemplate = $g('#cardBtn'); //定義的 Template id
        let colorID , btnID
        let allColorBtns, allStorageBtns
        let specAutoArr=[];
        let specAutoArr2=[];
        let specAutoArr3=[];
        let ipadSpecArr = []
        let iphoneSpecArr=[]; 
        let macSpecArr=[];
        let xhr = new XMLHttpRequest();
        let cloneBtn
        let filterArr,filterArr2
        let storageFilterArr, networkFilterArr, styleFilterArr, ramFilterArr, powerFilterArr
        
        let jsonParseObj= {}
       let IPadParseObj
       let MacAirParseObj

        //二、分頁監聽事件
        let ipadPageBtn = $g("#iPad")
        let ipadBtnId
        ipadPageBtn.addEventListener("click", function(){
            sectionTitle.innerHtml = "";            
            ipadBtnId = ipadPageBtn.getAttribute("id");        
            picBox.innerHTML = setBaseImg(ipadBtnId);
            
            getColorBtn(IPadParseObj);
            
            ipadSpecArr = jsonParseArr.IPad.Spec
            getStorageBtn(ipadSpecArr); //放在這裡才收的到取回的 url(JSON資料在雲端)
            document.querySelectorAll(".cardTemp2").forEach( storageNode => {
                    let storageId = storageNode.getAttribute("id");
                    storageNode.addEventListener("click" , function(event){
                        ipadStorageFilter(ipadSpecArr, storageId)
                    })                
            })

            getNetworkBtn(ipadSpecArr);
            document.querySelectorAll(".cardTemp2").forEach( networkNode => {
                    let networkId = networkNode.getAttribute("id");
                    networkNode.addEventListener("click" , function(event){
                        ipadNetworkFilter(networkId)
                    })                
            })               
        })

        
        

        let macPageBtn = $g("#MacAir")
        let macAirBtnId
        macPageBtn.addEventListener("click", function(){
            sectionTitle.innerHtml = "";    

            macAirBtnId = macPageBtn.getAttribute("id");        
            picBox.innerHTML = setBaseImg(macAirBtnId);

            getMacColorBtn();

            getMacRamBtn();
            document.querySelectorAll(".cardTemp2").forEach( Node => {
                    let ramId = Node.getAttribute("id");
                    Node.addEventListener("click" , function(event){
                        macRamFilter(ramId)
                    })                
            });

            getStorageBtn(jsonParseArr.MacAir.Spec)
            document.querySelectorAll(".cardTemp2").forEach( Node => {
                    let storageId = Node.getAttribute("id");
                    Node.addEventListener("click" , function(event){
                        macStorageFilter(storageId)
                    })        
            });

            getMacPowerBtn();
            document.querySelectorAll(".cardTemp2").forEach( Node => {
                    let powerId = Node.getAttribute("id");
                    console.log(Node) 
                    //其實面包含 ram、storage、power 的監聽，但前面都已經掛監聽，所以剩下的才能被掛上最後的監聽
                    Node.addEventListener("click" , function(event){
                        macPowerFilter(powerId)
                    })        
            });
        });

       function clearBtn(){

            if(cardTemp.innerHtml == "" && cardTemp2.innerHtml == "")
            {
                cardTemp.innerHtml = "";
                cardTemp2.innerHtml = "";
            }
       }
        
       
        //三、方法
        // window.onload = function(){
        //     fetch(IPhone14JsonUrl)
        //         .then(response => response.json())
        //         .then(resIPhone=> {
        //             jsonParseObj = resIPhone;
        //             console.log(jsonParseObj)
        //             return fetchJSON(IPadJsonUrl)
        //         })
        //         .then(resIPad => {
        //             IPadParseObj = resIPad;
        //             console.log(IPadParseObj)
        //             // return fetchJSON(macJsonUrl)
        //         })
        //         // .then(resMac=> {
        //         //     MacJsonArr = resMac;
        //         //     console.log(+MacJsonArr)
        //         // })          
        // }
        // function fetchJSON(url) {
        //     return fetch(url)
        //     .then(response => response.json())
        // }

        
        
        //實驗中....
        // window.onload = function(){
            
            // fetchJSON(IPhone14JsonUrl)
            // console.log(fetchJSON("IPhone-14"))      
            // fetchJSON("IPad")
        // }


        
        window.onload = function() {
            // return fetch  //要怎麼接出來
            fetch("./JSON/Apple-refTA-Category.json") //產生一個promise，只有then 或 await 可以解開他
            .then(res => res.json())
            .then(categoryData => {
                console.log(categoryData)
                // return response.json() //就是 data，這個 return 是往下走的
                return fetchMerchandise(categoryData[0].dataUrl)

            })
            .then(data => {
                jsonParseObj = data // not defined 沒接到data...
                console.log(`jsonParseObj...................`)
                console.log(jsonParseObj)
                getColorBtn(data)
                
            })          
        }

        function fetchMerchandise(url) {
            return fetch(url) //return 的是 promise 物件
                .then(response => response.json())
}
      

        // function fetchJSON(Url) {
        //     fetch
        //     .then(response => {
        //         console.log(response)
        //         return response.json() //就是 data，這個 return 是往下走的

        //     })
        //     .then(data => {
        //         jsonParseObj = data // not defined 沒接到data...
        //         console.log(`jsonParseObj...................`)
        //         console.log(jsonParseObj)
        //         // getColorBtn(data)              
        //     })
            
        // }
        
        

        
        //主圖幻燈片
        function setBaseImg(id) {
            console.log(id) //太空灰色01.jpg
            
            let imgUrl_04 = `./ApplePics02/${id}/baseImgUrl01.jpg`;
            let imgUrl_05 = `./ApplePics02/${id}/baseImgUrl02.jpg`;
            // let imgUrl_06 = `./ApplePics02/${id}/baseImgUrl03.jpg`;
                   
            let html = `
                <div id="carouselExample" class="carousel slide main-pic">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                        <img src="${imgUrl_04}" class="d-block w-100" alt="...">
                        </div>
                        <div class="carousel-item">
                        <img src="${imgUrl_05}" class="d-block w-100" alt="...">
                        </div>
                        
                        
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>`;

            return html
        }
       
          
        //可共用了！！！
        function getColorBtn(data){
            // console.log(data)
            let productMainImgObj = data.images;
            console.log(productMainImgObj)
            //物件包陣列，傳入資料，再去 forEach
            //{blue: Array(3), purple: Array(3), yellow: Array(3), midnight: Array(3), starlight: Array(3), …}
           
            let colorArr=[];                       
            colorArr = data.colors;
            console.log(colorArr)
                //現在是陣列，所以要 forEach 取裡面的 color
                // (6) [{…}, {…}, {…}, {…}, {…}, {…}]
                // 0: {colorName: '藍色', colorCode: 'blue', colorImg: '../ApplePics02/iPhone/color/藍色.jpg'}
                // 1: {colorName: '紫色', colorCode: 'purple', colorImg: '../ApplePics02/iPhone/color/紫色.jpg'}
                // 2: {colorName: '黃色', colorCode: 'yellow', colorImg: '../ApplePics02/iPhone/color/黃色.jpg'}
                // 3: {colorName: '午夜色', colorCode: 'midnight', colorImg: '../ApplePics02/iPhone/color/午夜色.jpg'}
                // 4: {colorName: '星光色', colorCode: 'starlight', colorImg: '../ApplePics02/iPhone/color/星光色.jpg'}
                // 5: {colorName: '(PRODUCT)RED', colorCode: 'red', colorImg: '../ApplePics02/iPhone/color/紅色.jpg'}

        
            // 生成顏色按鈕的格線系統 (DOM 操作)
            colorArr.forEach(item =>{
                allColorBtns = setColorBtnData(item.colorName ,item.colorCode, item.colorImg, productMainImgObj[item.colorCode])   //注意：最後一個參數寫法，因為資料裡面沒有 colorCode 這個東西                           
                let colorBtnSection = document.querySelector("#colorBtnSection");
                colorBtnSection.append(allColorBtns);
                
            })      
        }
        
        function setColorBtnData( colorName, colorCode, colorPic, imgArr){
            console.log(colorName) // 太空灰色、星光色、粉紅色、紫色、天藍色
            console.log(colorCode) //blue、purple、yellow、midnight....
            console.log(colorPic)  //../ApplePics02/iPhone/color/星光色.jpg
            console.log(imgArr)  //太空灰色01.jpg

            // <div class="card colorBtn cardTemp" id="太空灰色">
            //     <img src="" class="circle circleTemp">
            //     <h5 class="colorBtnName colorNameTemp">太空灰</h5> 

            // 使用 template 一定要 .content.cloneNode(true)
            cloneBtn = templateColorBtn.content.cloneNode(true); //參數要帶 true 才會層層複製
            colorID= cloneBtn.querySelector(".cardTemp").id = colorName;
            // console.log(colorID)       
            
            // cloneBtn.querySelector(".circleTemp").src = uri+item+'.png'; //uri 路徑已在全域宣告
            cloneBtn.querySelector(".circleTemp").src = colorPic; 
            cloneBtn.querySelector(".colorNameTemp").innerText = colorName;
            console.log(colorName)
            
            cloneBtn.querySelector(".cardTemp").addEventListener("click" , function(){
                    picBox.innerHTML = getColorImg(colorCode,imgArr); 
                    console.log(colorCode) 
            });

            return cloneBtn;  //製作好的卡片回覆給呼叫端
        }

        function getColorImg(colorCode,imgArr) {
            console.log(colorCode) //blue、purple、yellow、midnight....
            console.log(imgArr) 

            let imgUrlContainer
            imgArr.forEach((imgUrl, index) => {
                imgUrlContainer += 
                `<div class="carousel-item ${index === 0 ? "active" : ""}>
                    <img src="${imgUrl}" class="d-block w-100" alt="...">
                </div>`;
            })
            console.log(imgUrlContainer) //undefined???
            

            let carousel = `
            <div id="carouselExample" class="carousel slide main-pic">
                    <div class="carousel-inner">
                       ${imgUrlContainer}
  
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>`;

            return carousel;
        }

 
        


        function getStorageBtn(allSpecArr) { 
            console.log(`getStorageBtn的allSpecArr..................`);
            console.log(allSpecArr);
            // ipadSpecArr = jsonParseArr.IPad.Spec;
            // ipadSpecArr = jsonParseArr.IPad.Spec;
            // console.log(ipadSpecArr)
        
            //取得不重複的 storage 規格ˇ         
            allSpecArr.forEach(item=>{
                if(! specAutoArr.includes(item.storage)){
                     specAutoArr.push(item.storage)
                     console.log(specAutoArr)                                          
                    }
            })
                
            //生成按鈕的格線系統 (DOM 操作) 
            specAutoArr.forEach(item =>{
                allStorageBtns = setBtnData(item)   //64GB , 256GB
                    console.log(item)                                    
                let storageBtnSection = document.querySelector("#storageBtnSection");
                storageBtnSection.append(allStorageBtns);                                                    
            })
            // //掛入監聽事件，按下後過濾資料
            // document.querySelectorAll(".cardTemp2").forEach(node =>{        
            //     console.log(node)
    
            //     node.addEventListener("click" , function(){
            //         console.log(`${item}加裝監聽成功`);                      
            //         filterArr = ipadSpecArr.filter(x=> x.storage==item)
            //         console.log(filterArr)
                    
            //     });           
            // })
        };
               
        function getNetworkBtn(allSpecArr) { 
            // ipadSpecArr = jsonParseArr.IPad.Spec;
            console.log(`ipadSpecArr...`)
            console.log(ipadSpecArr);
        
            //取得不重複的 network 規格ˇ         
            allSpecArr.forEach(item=>{
                console.log(item)
                if(! specAutoArr2.includes(item.network) ){
                     specAutoArr2.push(item.network)
                     console.log(specAutoArr2)                                   
                    }
                })
                
            //生成按鈕的格線系統 (DOM 操作)
            specAutoArr2.forEach(item =>{
                allStorageBtns = setBtnData(item)   
                    console.log(item)                                    
                let networkBtnSection = document.querySelector("#networkBtnSection");
                networkBtnSection.append(allStorageBtns);              
                //掛入監聽事件，按下後過濾資料
                // document.querySelectorAll(".cardTemp2").forEach(node =>{        
                //     console.log(node)

                //     node.addEventListener("click" , function(){
                //         console.log(`${item}加裝監聽成功`);                      
                //         filterArr2 = filterArr.filter(x=> x.network==item)
                //         console.log(filterArr2)
                        
                //     });           
                // })
            })

        };

        function setBtnData(specValue){
            console.log(specValue) //64G , 256G
            
            // <template id="cardBtn">
            //     <div class="col-6 col-md-6 col-lg-6 col-xl-6">                             
            //         <div class="card cardTemp2" id="每個按鈕的ID">
            //             <h5 class="BtnName NameTemp">公版文字<span></span></h5>   
            //         </div>
            //     </div>
            // </template>

            let cloneBtn = btnTemplate.content.cloneNode(true); //參數要帶 true 才會層層複製
            btnID = cloneBtn.querySelector(".cardTemp2").id = specValue;
            console.log(btnID)
            console.log(specValue)
            cloneBtn.querySelector(".NameTemp").innerText = specValue;
            
            //掛入監聽事件，按下後過濾資料           
            // cloneBtn.querySelector(".cardTemp2").addEventListener("click" , function(){
            //     console.log(`${specValue}加裝監聽成功`);           
            //     // let refIdx = ipadSpecArr.map(x => Object.keys(x)) [0]; //map 出來的第 0 筆索引值 (本來會有3筆)
            //     // refIdx = ipadSpecArr.map(x => Object.values(x)) 
            //     // console.log(refIdx) 
            //     // refIdx.forEach(x=>{
            //     //     console.log(x);
            //     console.log(ipadSpecArr.storage)             
                
            //     filterArr = ipadSpecArr.filter(x=> x.storage==specValue)
            //     console.log(filterArr)
                
            //     if(specValue == "Wi-Fi" || specValue == "Cellular"){
            //         filterArr2 = filterArr.filter(x=> x.network==specValue )
            //         console.log(filterArr2)
            //     }
             
                // filterArr.forEach(data => {
                //     showPrice = data.price
                //     console.log(showPrice); 
                // });

            //});           

            return cloneBtn;
            //製作好的卡片回覆給呼叫端
        }

        function ipadStorageFilter(allSpecArr, storage) { 
                storageFilterArr = allSpecArr.filter(spec => spec.storage == storage)
                console.log(`storageFilterArr...`)
                console.log(storageFilterArr);
        };

        function ipadNetworkFilter(network) { 
                networkFilterArr = storageFilterArr.filter(spec => spec.network == network)
                console.log(`networkFilterArr...`)
                console.log(networkFilterArr);

                networkFilterArr.forEach(item =>{
                    console.log(item)
                    showPrice = item.price
                    console.log(showPrice); 
                })            
                priceBox.innerText = `$ ${showPrice}`;  
        };





        //iPhone
        function getIphoneColorBtn(){
            //取得資料
            let iphoneOutWarddArr=[];             
            iphoneOutWarddArr = jsonParseArr.IPhone.OutWard;
                //現在是陣列，所以要 forEach 取裡面的 color
        
            //生成顏色按鈕的格線系統 (DOM 操作)
            iphoneOutWarddArr.forEach(item =>{
                allColorBtns = setIphoneColorBtnData(item.color ,item.pic)   //顏色 & 平板圖片                              
                let colorBtnSection = document.querySelector("#colorBtnSection");
                colorBtnSection.append(allColorBtns);
                
            })      
        }

        function setIphoneColorBtnData(item,pic){
            console.log(item) // 太空灰色、星光色、粉紅色、紫色、天藍色
            console.log(pic)  //太空灰色01.jpg

            // <div class="card colorBtn cardTemp" id="太空灰色">
            //     <img src="" class="circle circleTemp">
            //     <h5 class="colorBtnName colorNameTemp">太空灰</h5> 

            // 使用 template 一定要 .content.cloneNode(true)
            cloneBtn = templateColorBtn.content.cloneNode(true); //參數要帶 true 才會層層複製
            colorID= cloneBtn.querySelector(".cardTemp").id = item;
            // console.log(colorID)       

            cloneBtn.querySelector(".circleTemp").src = uri2 +item+'.jpg'; //uri 路徑已在全域宣告
            cloneBtn.querySelector(".colorNameTemp").innerText = item;
            
            cloneBtn.querySelector(".cardTemp").addEventListener("click" , function(){
                    picBox.innerHTML = getIPhoneColorPic(pic);           
            });

            return cloneBtn;  //製作好的卡片回覆給呼叫端
        }
    
        function getIPhoneColorPic(pic) {
            console.log(pic) //太空灰色01.jpg
            
            let imgUrl = `https://raw.githubusercontent.com/hyeb407/hyeb407.github.io/main/JS_HW5%20Apple/ApplePics02/iPhone/OutWard/${pic}`;
            let pics = `
                <img src="${imgUrl}" class="main-pic" alt=""> `;

            return pics;
        }

        function getIphoneStyleBtn() {               
            iphoneSpecArr.forEach(item=>{
                if(! specAutoArr2.includes(item.style) ){
                     specAutoArr2.push(item.style)                               
                    }
                })
                
            //生成按鈕的格線系統 (DOM 操作)
            specAutoArr2.forEach(item =>{
                allStorageBtns = setBtnData(item)   
                    console.log(item)                                    
                let styleBtnSection = document.querySelector("#styleBtnSection");
                styleBtnSection.append(allStorageBtns);              
            })

        };

        function iphoneStyleFilter(style) { 
                styleFilterArr = iphoneSpecArr.filter(spec => spec.style == style)
                console.log(`styleFilterArr...`)
                console.log(styleFilterArr);
        };

        function iphoneStorageFilter(storage) { 
                storageFilterArr = styleFilterArr.filter(spec => spec.storage == storage)
                console.log(`storageFilterArr...`)
                console.log(storageFilterArr);

                storageFilterArr.forEach(item =>{
                    showPrice = item.price
                    console.log(showPrice); 
                })            
                priceBox.innerText = `$ ${showPrice}`; 
        };




        //mac
        function getMacColorBtn(){
            //取得資料
            let macOutWarddArr=[];             
            macOutWarddArr = jsonParseArr.MacAir.OutWard;
                //現在是陣列，所以要 forEach 取裡面的 color
        
            //生成顏色按鈕的格線系統 (DOM 操作)
            macOutWarddArr.forEach(item =>{
                allColorBtns = setMacColorBtnData(item.color ,item.pic ,'./ApplePics02/MacAir/color/')   //顏色 & 平板圖片                              
                let colorBtnSection = document.querySelector("#colorBtnSection");
                colorBtnSection.append(allColorBtns);
                
            })      
        }

        function setMacColorBtnData(item,pic){
            console.log(item) // 太空灰色、星光色、粉紅色、紫色、天藍色
            console.log(pic)  //太空灰色01.jpg

            // <div class="card colorBtn cardTemp" id="太空灰色">
            //     <img src="" class="circle circleTemp">
            //     <h5 class="colorBtnName colorNameTemp">太空灰</h5> 

            // 使用 template 一定要 .content.cloneNode(true)
            cloneBtn = templateColorBtn.content.cloneNode(true); //參數要帶 true 才會層層複製
            colorID= cloneBtn.querySelector(".cardTemp").id = item;
            // console.log(colorID)       

            cloneBtn.querySelector(".circleTemp").src = uri3+item+'.jpg'; //uri 路徑已在全域宣告
            cloneBtn.querySelector(".colorNameTemp").innerText = item;
            
            cloneBtn.querySelector(".cardTemp").addEventListener("click" , function(){
                    picBox.innerHTML = getMacColorPic(pic);           
            });

            return cloneBtn;  //製作好的卡片回覆給呼叫端
        }
    
        function getMacColorPic(pic) {
            console.log(pic) //太空灰色01.jpg
            
            let imgUrl = `https://raw.githubusercontent.com/hyeb407/hyeb407.github.io/main/JS_HW5%20Apple/ApplePics02/MacAir/OutWard/${pic}`;
            let pics = `
                <img src="${imgUrl}" class="main-pic" alt=""> `;

            return pics;
        }
        
        function getMacRamBtn() {        
            macSpecArr = jsonParseArr.MacAir.Spec;
            macSpecArr.forEach(item=>{
                if(! specAutoArr2.includes(item.ram) ){
                     specAutoArr2.push(item.ram)                               
                    }
                })
                
            //生成按鈕的格線系統 (DOM 操作)
            specAutoArr2.forEach(item =>{
                allStorageBtns = setBtnData(item)   
                    console.log(item)                                    
                let ramBtnSection = document.querySelector("#ramBtnSection");
                ramBtnSection.append(allStorageBtns);              
            })
        };

        function getMacPowerBtn() {    
            //取得不重複的 storage 規格ˇ         
            macSpecArr.forEach(item=>{
                if(! specAutoArr3.includes(item.power)){
                     specAutoArr3.push(item.power)
                     console.log(specAutoArr3)                                          
                    }
            })
                
            //生成按鈕的格線系統 (DOM 操作) 
            specAutoArr3.forEach(item =>{
                allStorageBtns = setBtnData(item)   //64GB , 256GB
                    console.log(item)                                    
                let powerBtnSection = document.querySelector("#powerBtnSection");
                powerBtnSection.append(allStorageBtns);                                                    
            })
        };   

        function macRamFilter(ram) { 
                ramFilterArr = macSpecArr.filter(spec => spec.ram == ram)
                console.log(`ramFilterArr...`)
                console.log(ramFilterArr);
        };

        function macStorageFilter(storage) { 
                storageFilterArr = ramFilterArr.filter(spec => spec.storage == storage)
                console.log(`storageFilterArr...`)
                console.log(storageFilterArr);
        };

        function macPowerFilter(power) { 
                powerFilterArr = storageFilterArr.filter(spec => spec.power == power)
                console.log(`powerFilterArr...`)
                console.log(powerFilterArr);
                
                powerFilterArr.forEach(item =>{
                    showPrice = item.price
                })
              
                console.log(showPrice); 
                priceBox.innerText = `$ ${showPrice}`;        
        };
        

    
    </script>
</body>
</html>